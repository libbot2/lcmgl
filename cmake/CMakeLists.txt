file(GLOB EXTRA_MODULE_DIRS
  RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}
  "${CMAKE_CURRENT_SOURCE_DIR}/*/"
)

foreach(EXTRA_MODULE_DIR ${EXTRA_MODULE_DIRS})
  if(IS_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/${EXTRA_MODULE_DIR}")
    if(CMAKE_VERSION VERSION_LESS ${EXTRA_MODULE_DIR})
      list(INSERT CMAKE_MODULE_PATH 0 "${CMAKE_CURRENT_SOURCE_DIR}/${EXTRA_MODULE_DIR}")
    endif()
  endif()
endforeach()

set(CMAKE_MODULE_PATH "${CMAKE_MODULE_PATH}" PARENT_SCOPE)
